name = "companion-bot"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Database - run: wrangler d1 create companion-db
[[d1_databases]]
binding = "DB"
database_name = "companion-db"
database_id = "YOUR_DB_ID_HERE"

# Memory Storage - run: wrangler r2 bucket create companion-memory
[[r2_buckets]]
binding = "MEMORY"
bucket_name = "companion-memory"

# Backup Storage - run: wrangler r2 bucket create companion-memory-backup
[[r2_buckets]]
binding = "BACKUP"
bucket_name = "companion-memory-backup"

# Environment variables
[vars]
BASE_URL = "https://companion.untitledpublishers.com"
PRICE_ID = "price_XXXXXXXX"

# Secrets (set via wrangler secret put):
# ANTHROPIC_API_KEY
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# SENDBLUE_API_KEY
# SENDBLUE_API_SECRET
# RESEND_API_KEY
# ADMIN_API_KEY

# Scheduled jobs
[triggers]
crons = [
  "0 * * * *",
  "0 0 1 * *"
]